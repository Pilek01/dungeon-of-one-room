:root {
  --bg-1: #0f1113;
  --bg-2: #15191f;
  --panel: #1c2128cc;
  --edge: #3a4049;
  --text: #e6e7ea;
  --muted: #9ea5b2;
  --hot: #f5ba4c;
  --warn: #f2a24a;
  --bad: #e26f67;
  --good: #7bd389;
  --board: #090b0f;
}

* {
  box-sizing: border-box;
}

.boot-screen {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 1;
  transition: opacity 0.6s ease-out;
}

.boot-screen.fading {
  opacity: 0;
  pointer-events: none;
}

.boot-screen.hidden {
  display: none;
}

.boot-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 28px;
  opacity: 0;
  animation: bootFadeIn 1.2s ease-out 0.3s forwards;
}

.boot-logo {
  width: min(420px, 80vw);
  height: auto;
  image-rendering: auto;
  filter: drop-shadow(0 0 30px #00000088);
}

@keyframes bootFadeIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

.boot-press {
  margin: 0;
  color: #e6e7ea;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  font-size: clamp(14px, 2vw, 20px);
  letter-spacing: 1.5px;
  text-transform: uppercase;
  animation: bootPulse 1.4s ease-in-out infinite;
}

.boot-credits {
  margin: 0;
  color: #5a6070;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  font-size: clamp(11px, 1.2vw, 14px);
  letter-spacing: 0.5px;
}

@keyframes bootPulse {
  0% { opacity: 0.35; }
  50% { opacity: 1; }
  100% { opacity: 0.35; }
}

.app-hidden {
  display: none !important;
}

body {
  margin: 0;
  min-height: 100vh;
  padding: 20px 14px;
  color: var(--text);
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  background:
    radial-gradient(1200px 600px at 15% -10%, #2a3038 0%, transparent 70%),
    radial-gradient(900px 500px at 100% 20%, #1f252f 0%, transparent 65%),
    repeating-linear-gradient(
      135deg,
      transparent 0,
      transparent 8px,
      #ffffff03 8px,
      #ffffff03 9px
    ),
    linear-gradient(180deg, var(--bg-2), var(--bg-1));
  display: grid;
  place-items: center;
}

.app {
  width: min(1260px, 100%);
  display: grid;
  gap: 14px;
}

.app-footer {
  color: var(--muted);
  font-size: 0.78rem;
  letter-spacing: 0.5px;
  text-align: center;
  opacity: 0.9;
  justify-self: center;
  width: min(576px, 92vw);
}

.titlebar {
  text-align: center;
  display: grid;
  gap: 4px;
}

.titlebar h1 {
  margin: 0;
  font-size: clamp(1.2rem, 2.2vw, 1.6rem);
  letter-spacing: 1.2px;
  text-transform: uppercase;
}

.titlebar p {
  margin: 0;
  color: var(--muted);
  font-size: 0.92rem;
}

.layout {
  position: relative;
  width: 100%;
}

.layout-track {
  display: grid;
  grid-template-columns: minmax(190px, 230px) 1fr minmax(280px, 340px);
  gap: 14px;
  align-items: start;
}

.board {
  display: grid;
  place-items: center;
  gap: 10px;
  background: linear-gradient(160deg, #11161d, #0b0d11);
  border: 1px solid var(--edge);
  box-shadow: 0 16px 42px #00000052;
  padding: 14px;
  border-radius: 12px;
}

.mobile-menu-button {
  display: none;
}

.mobile-swipe-hint {
  display: none;
}

.mobile-controls {
  display: none;
}

.depth-badge {
  width: min(576px, 92vw);
  display: grid;
  gap: 3px;
  border: 1px solid #ffffff1f;
  border-radius: 8px;
  background: linear-gradient(180deg, #121923d8, #0c1119d2);
  padding: 7px 10px;
  box-shadow: inset 0 0 0 1px #ffffff08;
}

.depth-badge-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: 28px;
}

.depth-meta-column {
  display: grid;
  gap: 1px;
}

.depth-meta-column.depth-meta-right {
  text-align: right;
}

.depth-meta {
  color: #b3c5df;
  font-size: clamp(0.68rem, 0.95vw, 0.77rem);
  letter-spacing: 0.35px;
  text-transform: uppercase;
}

.depth-badge strong {
  text-align: center;
  color: #f4f7ff;
  font-size: clamp(0.95rem, 1.4vw, 1.05rem);
  letter-spacing: 0.8px;
  text-transform: uppercase;
}

.depth-badge .depth-subtitle {
  text-align: center;
  color: #9fb2cf;
  font-size: clamp(0.74rem, 1.05vw, 0.82rem);
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.depth-badge.boss {
  border-color: #ff9d5a9a;
  background: linear-gradient(180deg, #2a1512e8, #1c1110dd);
  box-shadow: 0 0 12px #ff9d5a40, inset 0 0 0 1px #ffbf7e40;
}

.depth-badge.boss strong {
  color: #ffdba8;
}

.depth-badge.hidden {
  display: none;
}

.canvas-wrap {
  position: relative;
  display: inline-block;
  font-size: 0;
}

.room-intro-overlay {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 2;
  --room-intro-alpha: 1;
}

.room-intro-overlay.visible {
  display: flex;
}

.room-intro-card {
  width: min(90%, 420px);
  border: 1px solid #9ec0ff88;
  border-radius: 10px;
  background: linear-gradient(180deg, #0f1727e8, #0a111ed8);
  box-shadow: 0 8px 24px #00000066;
  padding: 10px 14px 9px;
  text-align: center;
  opacity: var(--room-intro-alpha);
  transform: translateY(calc((1 - var(--room-intro-alpha)) * 8px));
  transition: opacity 80ms linear, transform 80ms linear;
}

.room-intro-overlay.boss .room-intro-card {
  border-color: #ffb37d99;
  background: linear-gradient(180deg, #2a1512f0, #1d1211dd);
  box-shadow: 0 8px 24px #00000070, 0 0 16px #ff9d5a45;
}

.room-intro-title {
  margin: 0;
  color: #f3f7ff;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  font-size: clamp(0.95rem, 1.8vw, 1.08rem);
  font-weight: 700;
  letter-spacing: 0.9px;
  text-transform: uppercase;
  line-height: 1.12;
}

.room-intro-subtitle {
  margin: 4px 0 0;
  color: #bccae2;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  font-size: clamp(0.74rem, 1.3vw, 0.83rem);
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  line-height: 1.2;
}

.room-intro-overlay.boss .room-intro-title {
  color: #ffe1c0;
}

.room-intro-overlay.boss .room-intro-subtitle {
  color: #ffc59b;
}

canvas {
  display: block;
  image-rendering: pixelated;
  width: min(576px, 92vw);
  height: min(576px, 92vw);
  border: 6px solid #07090d;
  background: var(--board);
  border-radius: 6px;
  box-shadow: inset 0 0 0 2px #2f3640;
}

canvas.boss-pulse {
  animation: bossCanvasPulse 1.15s ease-in-out infinite;
}

@keyframes bossCanvasPulse {
  0% {
    border-color: #2a0e0e;
    box-shadow: inset 0 0 0 2px #4b2b2b, 0 0 0 rgba(255, 160, 107, 0);
  }
  50% {
    border-color: #6b1f1f;
    box-shadow: inset 0 0 0 2px #9d4a2a, 0 0 16px rgba(255, 167, 92, 0.55);
  }
  100% {
    border-color: #2a0e0e;
    box-shadow: inset 0 0 0 2px #4b2b2b, 0 0 0 rgba(255, 160, 107, 0);
  }
}

.skills-bar {
  width: min(576px, 92vw);
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.skill-card {
  --skill-ready-border: #79c98d77;
  --skill-ready-bg: #79c98d14;
  --skill-cooling-border: #c7a05c66;
  --skill-cooling-bg: #c7a05c17;
  --skill-idle-bg: #0f141d;
  border: 1px solid #ffffff22;
  border-radius: 8px;
  background: var(--skill-idle-bg);
  padding: 6px 7px;
  display: grid;
  gap: 3px;
  min-height: 72px;
}

.skill-card.tier-base {
  --skill-ready-border: #79c98d77;
  --skill-ready-bg: #79c98d14;
  --skill-cooling-border: #c7a05c66;
  --skill-cooling-bg: #c7a05c17;
  --skill-idle-bg: #0f141d;
}

.skill-card.tier-rare {
  --skill-ready-border: #66b4ff8a;
  --skill-ready-bg: #66b4ff1e;
  --skill-cooling-border: #66b4ff5e;
  --skill-cooling-bg: #66b4ff12;
  --skill-idle-bg: #0e1520;
}

.skill-card.tier-epic {
  --skill-ready-border: #b872ff94;
  --skill-ready-bg: #b872ff22;
  --skill-cooling-border: #b872ff66;
  --skill-cooling-bg: #b872ff14;
  --skill-idle-bg: #161022;
}

.skill-card.tier-legendary {
  --skill-ready-border: #ffbf4ca8;
  --skill-ready-bg: #ffbf4c24;
  --skill-cooling-border: #ffbf4c78;
  --skill-cooling-bg: #ffbf4c18;
  --skill-idle-bg: #22170d;
}

.skill-card.ready {
  border-color: var(--skill-ready-border);
  background: var(--skill-ready-bg);
}

.skill-card.armed {
  border-color: #8fd9ffcc;
  background: #8fd9ff22;
  box-shadow: inset 0 0 0 1px #d7efff4d;
}

.skill-card.cooling {
  border-color: var(--skill-cooling-border);
  background: var(--skill-cooling-bg);
}

.skill-card.idle {
  background: var(--skill-idle-bg);
  opacity: 0.78;
}

.skill-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 5px;
}

.skill-key {
  color: #f7ca75;
  font-size: 0.76rem;
  font-weight: 700;
}

.skill-icon {
  min-width: 24px;
  text-align: center;
  color: #d4e1fa;
  border: 1px solid #ffffff26;
  border-radius: 4px;
  background: #ffffff0d;
  font-size: 0.74rem;
  line-height: 1.2;
  padding: 1px 3px;
}

.skill-cd {
  color: #c9d5ea;
  font-size: 0.72rem;
  font-weight: 700;
}

.skill-name {
  color: #ebf1ff;
  font-size: 0.85rem;
  font-weight: 700;
  letter-spacing: 0.1px;
}

.skill-name small {
  color: #9fb2cf;
  font-size: 0.68rem;
  font-weight: 700;
  letter-spacing: 0.2px;
}

.skill-card.tier-rare .skill-name small {
  color: #7ebdff;
}

.skill-card.tier-epic .skill-name small {
  color: #d09cff;
}

.skill-card.tier-legendary .skill-name small {
  color: #ffd28a;
}

.skill-desc {
  color: #9caac2;
  font-size: 0.74rem;
  line-height: 1.2;
}

.screen-overlay {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: none;
  padding: 16px 14px;
  color: #f2f6ff;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  line-height: 1.28;
  text-shadow: 0 2px 8px #000000cc;
  z-index: 4;
}

.screen-overlay.visible {
  display: flex;
  pointer-events: auto;
}

.overlay-card {
  width: 100%;
  background: linear-gradient(180deg, #0c1119b8, #090d14d2);
  border: 1px solid #91a2c744;
  border-radius: 10px;
  padding: 14px 10px;
  box-shadow: 0 10px 24px #00000066;
}

.overlay-card.overlay-card-wide {
  width: min(720px, 100%);
  max-height: min(86vh, 720px);
  overflow: hidden;
}

.overlay-card.overlay-card-danger {
  border-color: #ff8f8f99;
  background: linear-gradient(180deg, #2a1215e6, #16090cdd);
  box-shadow: 0 10px 24px #00000080, 0 0 24px #ff6f6f40;
}

.overlay-card.overlay-card-danger .overlay-title {
  color: #ffd7d7;
}

.overlay-card.overlay-card-danger .overlay-sub {
  color: #ffc2c2;
}

.overlay-card.overlay-card-danger .overlay-hint {
  color: #ffe2e2;
}

.overlay-card.overlay-card-success {
  border-color: #7bd3898f;
  background: linear-gradient(180deg, #112018e8, #0a130fdd);
  box-shadow: 0 10px 24px #00000080, 0 0 20px #5fcf7a3a;
}

.overlay-card.overlay-card-success .overlay-title {
  color: #d8ffe3;
}

.overlay-card.overlay-card-success .overlay-sub {
  color: #c2f0ce;
}

.overlay-card.overlay-card-success .overlay-hint {
  color: #e2ffe9;
}

.overlay-title {
  margin: 0;
  font-size: clamp(18px, 2.2vw, 26px);
  line-height: 1.05;
  letter-spacing: 0.6px;
}

.overlay-sub {
  margin: 8px 0 0;
  font-size: clamp(11px, 1.3vw, 15px);
  color: #c4cde0;
}

.overlay-hint {
  margin: 14px 0 0;
  font-size: clamp(11px, 1.25vw, 14px);
  color: #eef4ff;
}

.overlay-pulse {
  animation: overlayPulse 1.2s ease-in-out infinite;
}

.overlay-menu {
  margin: 12px auto 0;
  width: min(390px, 100%);
  display: grid;
  gap: 7px;
}

.relic-exchange-list {
  margin: 12px auto 0;
  width: min(620px, 100%);
  max-height: min(40vh, 360px);
  overflow: auto;
  display: grid;
  gap: 6px;
  padding-right: 2px;
}

.relic-exchange-row {
  border: 1px solid #ffffff2a;
  border-radius: 8px;
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  text-align: left;
}

.relic-exchange-main strong {
  display: block;
  font-size: clamp(12px, 1.3vw, 15px);
  line-height: 1.2;
}

.relic-exchange-main span {
  display: block;
  margin-top: 2px;
  font-size: clamp(11px, 1.12vw, 13px);
  color: #b8c5de;
}

.relic-exchange-gold {
  color: #9ff0b3;
  font-weight: 700;
  font-size: clamp(12px, 1.3vw, 15px);
  line-height: 1.2;
}

.relic-exchange-empty {
  border: 1px dashed #7bd38966;
  border-radius: 8px;
  padding: 10px;
  color: #a9dfb8;
  text-align: center;
}

.leaderboard-modal-list {
  width: min(660px, 100%);
  max-height: min(56vh, 460px);
  overflow: auto;
  padding-right: 2px;
}

.overlay-card.overlay-card-leaderboard {
  border-color: #b49a6a;
  background:
    radial-gradient(120% 90% at 50% -20%, #f0ddb933 0%, transparent 55%),
    linear-gradient(180deg, #262118f2, #1a1711ea 58%, #14110ce8 100%);
  box-shadow: 0 14px 28px #00000082, inset 0 0 0 1px #f1d39f22;
}

.overlay-card.overlay-card-leaderboard .overlay-title {
  color: #ead4aa;
  text-shadow: 0 1px 0 #000, 0 0 14px #d7b27244;
  letter-spacing: 0.8px;
}

.overlay-card.overlay-card-leaderboard .overlay-sub {
  color: #cab993;
}

.overlay-card.overlay-card-leaderboard .overlay-hint {
  color: #efdfc0;
}

.overlay-card.overlay-card-leaderboard .leaderboard-modal-list {
  width: min(680px, 100%);
  padding: 4px 6px 2px;
  border: 1px solid #c7aa7445;
  border-radius: 10px;
  background:
    repeating-linear-gradient(
      0deg,
      #ffffff03 0,
      #ffffff03 2px,
      transparent 2px,
      transparent 18px
    ),
    linear-gradient(180deg, #0f0d0ad6, #0d0b08ca);
  box-shadow: inset 0 0 0 1px #ffffff05;
}

.leaderboard-entry {
  display: grid;
  grid-template-columns: 42px 1fr;
  gap: 10px;
  align-items: start;
  border: 1px solid #7c6b4a80;
  background: linear-gradient(180deg, #2c2419b8, #221c14af);
  border-radius: 9px;
  padding: 8px 10px;
  text-align: left;
}

.leaderboard-rank {
  width: 32px;
  min-height: 26px;
  display: grid;
  place-items: center;
  border-radius: 7px;
  border: 1px solid #9b86609e;
  background: linear-gradient(180deg, #3b3022, #2b241a);
  color: #e2c893;
  font-weight: 700;
  font-size: 0.85rem;
  letter-spacing: 0.3px;
}

.leaderboard-main {
  display: grid;
  gap: 4px;
}

.leaderboard-name {
  color: #f0dfbf;
  font-size: clamp(12px, 1.35vw, 15px);
  line-height: 1.2;
}

.leaderboard-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.leaderboard-stats span {
  display: inline-block;
  border: 1px solid #b798664f;
  border-radius: 999px;
  padding: 1px 7px;
  background: #f5cd8d14;
  color: #dec59a;
  font-size: clamp(10px, 1.05vw, 12px);
  line-height: 1.3;
}

.leaderboard-meta {
  color: #bca881;
  font-size: clamp(10px, 1.02vw, 12px);
  line-height: 1.3;
}

.leaderboard-entry.leaderboard-rank-1 {
  border-color: #e3bf75d9;
  background: linear-gradient(180deg, #4a3920ca, #302515c0);
  box-shadow: 0 0 12px #f3c56b36, inset 0 0 0 1px #f6d9a34d;
  animation: leaderboardEngravedGlow 2.6s ease-in-out infinite;
}

.leaderboard-entry.leaderboard-rank-1 .leaderboard-rank {
  border-color: #ffd792;
  background: linear-gradient(180deg, #82602b, #5c431f);
  color: #fff1cf;
  animation: leaderboardEngravedBadgeGlow 2.6s ease-in-out infinite;
}

.leaderboard-entry.leaderboard-rank-2 {
  border-color: #c7cedcaa;
  background: linear-gradient(180deg, #33353bc7, #25272caf);
}

.leaderboard-entry.leaderboard-rank-2 .leaderboard-rank {
  border-color: #d7deecaa;
  background: linear-gradient(180deg, #5f6774, #454c58);
  color: #edf2ff;
}

.leaderboard-entry.leaderboard-rank-3 {
  border-color: #caa681b8;
  background: linear-gradient(180deg, #3b2a1ec4, #2e2118b0);
}

.leaderboard-entry.leaderboard-rank-3 .leaderboard-rank {
  border-color: #e0b48aa8;
  background: linear-gradient(180deg, #7a4f30, #5c3e28);
  color: #ffe1cb;
}

@keyframes leaderboardEngravedGlow {
  0% {
    border-color: #d6b06cd0;
    box-shadow: 0 0 8px #f3c56b1f, inset 0 0 0 1px #f6d9a336;
  }
  50% {
    border-color: #f2d08ddd;
    box-shadow: 0 0 16px #f3c56b4a, inset 0 0 0 1px #f6d9a366;
  }
  100% {
    border-color: #d6b06cd0;
    box-shadow: 0 0 8px #f3c56b1f, inset 0 0 0 1px #f6d9a336;
  }
}

@keyframes leaderboardEngravedBadgeGlow {
  0% {
    box-shadow: 0 0 0 #ffd79200, inset 0 0 0 1px #fff2d31f;
  }
  50% {
    box-shadow: 0 0 12px #ffd79259, inset 0 0 0 1px #fff2d366;
  }
  100% {
    box-shadow: 0 0 0 #ffd79200, inset 0 0 0 1px #fff2d31f;
  }
}

.name-modal-wrap {
  margin: 12px auto 0;
  width: min(420px, 100%);
  display: grid;
  gap: 8px;
}

.name-input {
  width: 100%;
  border: 1px solid #9fb3d277;
  border-radius: 8px;
  background: #0f1520;
  color: #eef3ff;
  font-family: "Courier Prime", "Cascadia Mono", "IBM Plex Mono", monospace;
  font-size: 0.95rem;
  line-height: 1.3;
  padding: 10px 12px;
  outline: none;
}

.name-input:focus {
  border-color: #c2d8ff;
  box-shadow: 0 0 0 1px #c2d8ff55 inset, 0 0 0 2px #5b7fbf44;
}

.overlay-menu-row {
  display: grid;
  grid-template-columns: 24px 1fr;
  gap: 8px;
  align-items: start;
  border: 1px solid #ffffff2a;
  background: #ffffff0f;
  border-radius: 8px;
  padding: 8px;
  text-align: left;
}

.overlay-menu-row strong {
  display: block;
  font-size: clamp(12px, 1.3vw, 15px);
  line-height: 1.25;
  color: #ecf2ff;
}

.overlay-menu-row span {
  display: block;
  font-size: clamp(11px, 1.15vw, 13px);
  line-height: 1.3;
  color: #b8c5de;
}

.overlay-menu-row.merchant-tier-rare {
  border-color: #4d9fff77;
  background: linear-gradient(180deg, #4d9fff1f, #4d9fff10);
  box-shadow: inset 0 0 0 1px #4d9fff2e;
}

.overlay-menu-row.merchant-tier-epic {
  border-color: #b44dff88;
  background: linear-gradient(180deg, #b44dff23, #b44dff14);
  box-shadow: inset 0 0 0 1px #b44dff30;
}

.overlay-menu-row.merchant-tier-legendary {
  border-color: #ffb02099;
  background: linear-gradient(180deg, #ffb0202c, #ffb02018);
  box-shadow: inset 0 0 0 1px #ffb02045, 0 0 10px #ffb0202b;
  animation: merchantLegendaryPulse 1.8s ease-in-out infinite;
}

.merchant-tier-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 1px 6px;
  border-radius: 999px;
  border: 1px solid #ffffff2e;
  font-style: normal;
  font-size: 0.72em;
  font-weight: 700;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  color: #c8d2e9;
  background: #ffffff12;
  vertical-align: middle;
}

.merchant-tier-badge.merchant-tier-rare {
  color: #8ec3ff;
  border-color: #4d9fff70;
  background: #4d9fff1c;
}

.merchant-tier-badge.merchant-tier-epic {
  color: #e0b3ff;
  border-color: #b44dff73;
  background: #b44dff22;
}

.merchant-tier-badge.merchant-tier-legendary {
  color: #ffd892;
  border-color: #ffb0208f;
  background: #ffb0202b;
}

.overlay-menu-key {
  color: #ffd787;
  font-weight: 700;
  font-size: clamp(12px, 1.2vw, 14px);
  line-height: 1.35;
}

.overlay-menu-row.selected {
  border-color: #9ec0ff88;
  box-shadow: 0 0 0 1px #9ec0ff4d inset;
  background: #8bb4ff2a;
}

.overlay-menu-row.disabled {
  opacity: 0.55;
}

@keyframes merchantLegendaryPulse {
  0% { box-shadow: inset 0 0 0 1px #ffb02045, 0 0 6px #ffb02024; }
  50% { box-shadow: inset 0 0 0 1px #ffb02059, 0 0 14px #ffb02055; }
  100% { box-shadow: inset 0 0 0 1px #ffb02045, 0 0 6px #ffb02024; }
}

@keyframes overlayPulse {
  0% {
    opacity: 0.45;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.45;
  }
}

.panel {
  background: var(--panel);
  backdrop-filter: blur(3px);
  border: 1px solid var(--edge);
  border-radius: 12px;
  box-shadow: 0 16px 30px #00000045;
  padding: 12px;
  display: grid;
  gap: 10px;
}

.panel-left {
  width: 100%;
}

.panel-right {
  width: 100%;
}

.hud {
  display: grid;
  gap: 8px;
}

.hud-section {
  border: 1px solid #ffffff1a;
  border-radius: 8px;
  background: #0f141c;
  padding: 8px;
  display: grid;
  gap: 4px;
}

.hud-section h4 {
  margin: 0 0 2px;
  color: #b9c4d8;
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.statline {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  border-bottom: 1px dashed #ffffff1f;
  padding-bottom: 4px;
  font-size: 0.96rem;
}

.statline strong {
  color: var(--hot);
  font-weight: 700;
}

.hud .statline span[title],
.hud .hud-relic-item[title] {
  cursor: help;
}

.hud-relic-item {
  font-size: 0.9rem;
  border-bottom: 1px dashed #ffffff1a;
  padding: 3px 0 4px;
}

.hud-relic-empty {
  color: var(--muted);
  font-size: 0.85rem;
  padding-top: 2px;
}

.actions,
.active-effects,
.mutators,
.log {
  border: 1px solid #ffffff1a;
  border-radius: 8px;
  padding: 8px;
}

.actions {
  background: #11161d;
  color: #c8d0de;
  min-height: 44px;
  font-size: 0.94rem;
  line-height: 1.45;
}

.active-effects {
  background: #0f141c;
  display: grid;
  gap: 4px;
}

.active-effects .statline span[title] {
  cursor: help;
}

.log {
  background: #0f1217;
  min-height: 132px;
  font-size: 0.9rem;
  color: var(--muted);
  line-height: 1.45;
}

.mutators {
  background: #10151d;
  display: grid;
  gap: 6px;
}

.mutators h3 {
  margin: 0 0 2px;
  font-size: 0.86rem;
  color: #b9c4d8;
  font-weight: 600;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.leaderboard-note {
  display: block;
  margin: 0 0 4px;
  font-size: 0.76rem;
  color: #8ea0be;
  line-height: 1.25;
}

.leaderboard-row .mut-body strong {
  color: #d9e4f7;
}

.leaderboard-top {
  border-color: #f5ba4c88;
  background: #f5ba4c18;
}

.leaderboard-top .mut-key {
  color: #ffd98f;
}

.camp-tax-note {
  display: block;
  margin: 0 0 4px;
  font-size: 0.78rem;
  color: #98a9c3;
  line-height: 1.25;
}

.camp-tax-note.positive {
  color: #f0b56e;
}

.mut-row {
  display: grid;
  grid-template-columns: 18px 1fr;
  gap: 7px;
  align-items: start;
  border: 1px solid #ffffff14;
  border-radius: 6px;
  padding: 4px 6px;
  background: #ffffff05;
}

.mut-key {
  font-size: 0.8rem;
  color: #f7ca75;
  line-height: 1.4;
}

.mut-body {
  display: grid;
  gap: 2px;
}

.mut-body strong {
  font-size: 0.86rem;
  color: #d7deec;
  font-weight: 600;
}

.mut-body em {
  font-style: normal;
  font-size: 0.78rem;
  color: #9fb3d2;
}

.mut-body small {
  font-size: 0.81rem;
  color: #95a2b8;
  line-height: 1.25;
}

.mut-on {
  border-color: #79c98d66;
  background: #79c98d11;
}

.mut-on .mut-body strong {
  color: #8fdf9e;
}

.mut-unaffordable {
  border-color: #e26f6770;
  background: #e26f6714;
}

.mut-unaffordable .mut-key {
  color: #ff9b95;
}

.mut-unaffordable .mut-body strong {
  color: #ffb3ad;
}

.mut-unaffordable .mut-body em,
.mut-unaffordable .mut-body small {
  color: #d79a96;
}

.mut-selected {
  border-color: #8bb4ff88;
  background: #8bb4ff18;
  box-shadow: 0 0 0 1px #8bb4ff33 inset;
}

.mut-selected .mut-body strong {
  color: #dceaff;
}

.mut-locked {
  opacity: 0.58;
}

.mut-rare {
  border-color: #4d9fff55;
  background: #4d9fff14;
}

.mut-rare .mut-body strong {
  color: #4d9fff;
}

.mut-epic {
  border-color: #b44dff66;
  background: #b44dff18;
}

.mut-epic .mut-body strong {
  color: #b44dff;
}

.mut-legendary {
  border-color: #ffb02088;
  background: #ffb02022;
  animation: legendaryPulse 1.8s ease-in-out infinite;
}

.mut-legendary .mut-body strong {
  color: #ffb020;
}

@keyframes legendaryPulse {
  0% { box-shadow: 0 0 4px #ffb02033; }
  50% { box-shadow: 0 0 12px #ffb02066; }
  100% { box-shadow: 0 0 4px #ffb02033; }
}

.log div + div {
  margin-top: 4px;
}

.good {
  color: var(--good);
}

.bad {
  color: var(--bad);
}

.warn {
  color: var(--warn);
}

.help {
  margin: 0;
  color: #8f98a8;
  font-size: 0.86rem;
  line-height: 1.35;
}

@media (max-width: 1200px) {
  .layout-track {
    grid-template-columns: minmax(180px, 220px) 1fr;
  }

  .panel-right {
    grid-column: 1 / -1;
    max-width: 900px;
    justify-self: center;
  }
}

@media (max-width: 920px) {
  body {
    padding: 10px 8px;
  }

  .titlebar,
  .app-footer {
    display: none;
  }

  .app {
    width: 100%;
    gap: 8px;
  }

  .layout {
    overflow: hidden;
    border-radius: 12px;
  }

  .layout.mobile-layout {
    touch-action: none;
  }

  .layout.mobile-layout .layout-track > .panel {
    touch-action: pan-y;
  }

  .layout-track {
    display: flex;
    gap: 0;
    align-items: stretch;
    width: 100%;
    transform: translate3d(0, 0, 0);
    transition: transform 220ms ease;
    will-change: transform;
  }

  .layout.mobile-layout .layout-track {
    width: 300%;
    transform: translate3d(calc(var(--mobile-pane-index, 1) * -33.333%), 0, 0);
  }

  .layout-track > .panel,
  .layout-track > .board {
    width: 100%;
    max-width: 100%;
    flex: 0 0 100%;
    justify-self: stretch;
  }

  .layout.mobile-layout .layout-track > .panel,
  .layout.mobile-layout .layout-track > .board {
    width: 33.333%;
    max-width: 33.333%;
    flex: 0 0 33.333%;
  }

  .layout-track > .panel {
    min-height: calc(100vh - 26px);
    overflow: auto;
    overscroll-behavior: contain;
  }

  .layout-track > .board {
    min-height: calc(100vh - 26px);
    align-content: start;
    padding: 10px 8px 12px;
    border-radius: 12px;
  }

  .panel-right {
    grid-column: auto;
    max-width: 100%;
    justify-self: stretch;
  }

  canvas {
    width: min(576px, calc(100vw - 28px));
    height: min(576px, calc(100vw - 28px));
  }

  .depth-badge,
  .skills-bar {
    width: min(576px, calc(100vw - 28px));
  }

  .mobile-menu-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    right: 10px;
    bottom: 10px;
    z-index: 12;
    border: 1px solid #ffffff30;
    border-radius: 8px;
    background: linear-gradient(180deg, #111a27f2, #0d121be8);
    color: #ebf1ff;
    font-family: inherit;
    font-size: 0.76rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    padding: 8px 11px;
    box-shadow: 0 6px 18px #00000055;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transform: translateY(6px);
    transition: opacity 120ms ease, transform 120ms ease;
  }

  .mobile-menu-button.visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  .mobile-menu-button:active {
    transform: translateY(1px);
  }

  .mobile-swipe-hint {
    display: grid;
    gap: 2px;
    position: absolute;
    left: 50%;
    top: 10px;
    z-index: 11;
    width: min(560px, calc(100vw - 34px));
    transform: translate(-50%, -8px);
    opacity: 0;
    pointer-events: none;
    border: 1px solid #ffffff2a;
    border-radius: 8px;
    padding: 8px 10px;
    background: linear-gradient(180deg, #101a29f0, #0b111bdc);
    box-shadow: 0 8px 20px #00000055;
    color: #dce7fb;
    text-align: center;
    transition: opacity 180ms ease, transform 180ms ease;
  }

  .mobile-swipe-hint strong {
    font-size: 0.72rem;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    color: #f2f6ff;
  }

  .mobile-swipe-hint span {
    font-size: 0.72rem;
    line-height: 1.25;
    color: #b6c7e3;
  }

  .mobile-swipe-hint.visible {
    opacity: 1;
    transform: translate(-50%, 0);
  }

  /* Mobile Controls: D-pad + action buttons */
  .mobile-controls {
    display: block;
    width: min(576px, calc(100vw - 28px));
    margin-top: 10px;
    user-select: none;
    -webkit-user-select: none;
  }

  .mobile-controls.hidden {
    display: none;
  }

  .mobile-controls-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }

  /* D-pad */
  .mobile-dpad {
    display: grid;
    grid-template-rows: auto auto auto;
    gap: 4px;
    flex-shrink: 0;
  }

  .dpad-middle-row {
    display: flex;
    gap: 4px;
    align-items: center;
  }

  .dpad-center {
    width: 44px;
    height: 44px;
    background: #1c2128;
    border-radius: 6px;
    opacity: 0.3;
    flex-shrink: 0;
  }

  .dpad-btn {
    width: 44px;
    height: 44px;
    border: 1px solid #ffffff22;
    border-radius: 8px;
    background: linear-gradient(180deg, #1e2a3a, #141a23);
    color: #c8d8f0;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: background 80ms ease, transform 60ms ease;
    flex-shrink: 0;
  }

  .dpad-btn:active {
    background: linear-gradient(180deg, #2a3d55, #1a2435);
    transform: scale(0.92);
  }

  /* Action buttons grid */
  .mobile-action-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 6px;
    flex: 1;
  }

  .mact-btn {
    height: 44px;
    border-radius: 8px;
    border: 1px solid #ffffff22;
    font-family: inherit;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    cursor: pointer;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: background 80ms ease, transform 60ms ease;
  }

  .mact-btn:active {
    transform: scale(0.92);
  }

  /* Skill buttons (Z/X/C) - niebieskawy akcent */
  .mact-skill {
    background: linear-gradient(180deg, #1a2d45, #111e2e);
    color: #7eb8f5;
    border-color: #3a6090;
  }

  .mact-skill:active {
    background: linear-gradient(180deg, #1f3a5a, #152436);
  }

  /* Action buttons (F/E/Q) - cieplejszy akcent */
  .mact-action {
    background: linear-gradient(180deg, #2a1e10, #1a1208);
    color: #d4a060;
    border-color: #7a5030;
  }

  .mact-action:active {
    background: linear-gradient(180deg, #3a2a14, #20180a);
  }

  /* Restart button row (camp / dead phases) */
  .mobile-restart-row {
    display: none;
    margin-top: 8px;
  }

  .mobile-controls.show-restart .mobile-restart-row {
    display: block;
  }

  .mobile-controls.show-restart .mobile-controls-row {
    display: none;
  }

  .mact-restart {
    width: 100%;
    height: 48px;
    background: linear-gradient(180deg, #1a3a1a, #0f220f);
    color: #7bd389;
    border-color: #3a7a3a;
    font-size: 0.85rem;
  }

  .mact-restart:active {
    background: linear-gradient(180deg, #234a23, #142814);
  }

}
